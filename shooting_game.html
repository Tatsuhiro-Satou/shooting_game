<!DOCTYPE HTML>
<html>
	<head>
		<title>Shooting game</title>
		<style>

			.centeredAttribute {
			  position: fixed; /* or absolute */
			  top: 50%;
			  left: 50%;
			  margin-top: -350px; /* 50% of canvas height */
			  margin-left: -600px; /* 50% of canvas width */

			}

		</style>
	</head>
	<body>
		<canvas id="screen" class="centeredAttribute" width="1200" height="700"></canvas>

		<script>
			const CANVAS = document.getElementById('screen');
			const CONTEXT = CANVAS.getContext('2d');
			//var PLAYER = { x:0, y:0, width: 30, height: 30 };
			var KEYS = {
				UP: 87,
				LEFT: 65,
				RIGHT: 68,
				DOWN: 83,
				INFO: 73


			};

			document.getElementById("screen").style.backgroundColor = 'rgb(51, 171, 210)';
			window.addEventListener('keydown', keyHandler, false);

			function Player(initialX, initialY) {
				this.image = new Image(); 
				this.image.src = "resources/jet_sprite.png"
				this.width = 60;
				this.height = 60;
				this.x = initialX;
				this.y = initialY - this.height;
			}

			var PLAYER = new Player((CANVAS.width / 2), CANVAS.height);

			PLAYER.image.onload = function() {
				PLAYER.draw();
			}

			Player.prototype.getInfo = function() {
				return "x = " + this.x + ", y = " + this.y;
			};

			Player.prototype.draw = function() {
				CONTEXT.drawImage(PLAYER.image, this.x, this.y, this.width, this.height);
			};

			window.onload = function() {
				init();
			}

			function init() {
				
			}

			function keyHandler(event) {
				removeTail(PLAYER.x, PLAYER.y, PLAYER.width, PLAYER.height);
				switch (event.keyCode) {
					case 87: // up
						if (checkBounds(PLAYER.x, (PLAYER.y - 10))) {
							PLAYER.y -= 10;
						}
					break;
					case 65: // left 
						if (checkBounds((PLAYER.x - 10), PLAYER.y)) {
							PLAYER.x -= 10;
						}
					break;
					case 68: // right 
						if (checkBounds((PLAYER.x + 10), PLAYER.y)) {
							PLAYER.x += 10;
						}
					break;
					case 83: // down 
						if (checkBounds(PLAYER.x, (PLAYER.y + 10))) {
							PLAYER.y += 10;
						}
					break;
					case 73: // info 
						alert(PLAYER.x + ", " + PLAYER.y);
					break;
				}
				PLAYER.draw();
			}

			function checkBounds(x, y) {
				//alert(newMove);
				//alert(CANVAS.height - PLAYER.height);
				//alert(PLAYER.y);


				if (y > (CANVAS.height - PLAYER.height)) { // prevent down
					return 0;
				} else if (x < 0) {
					return 0;
				} else if (x > (CANVAS.width - PLAYER.width)) {
					return 0;
				} else if (y < 0) {
					return 0;
				}
				

				return 1;
			}

			function removeTail(x, y, width, height) {
				//alert(x + " " + y + " " + width + " " + height);
				CONTEXT.fillStyle = "rgb(51, 171, 210)";
				CONTEXT.fillRect(x, y, width, height); 
			}

/*
			function setInitialLocation() {
				PLAYER.x = CANVAS.width / 2;
				PLAYER.y = CANVAS.height - PLAYER.height;
				drawPlayer();
			}
			// keypress

			*/

		</script>
	</body> 
</html>
